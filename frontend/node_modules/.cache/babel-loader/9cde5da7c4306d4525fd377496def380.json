{"ast":null,"code":"import _toConsumableArray from\"/home/metro/Desktop/projects/ecom-mern/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/home/metro/Desktop/projects/ecom-mern/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import{Link}from'react-router-dom';import{Row,Col,ListGroup,Image,Form,Button,Card}from'react-bootstrap';import{addToCart,removeFromCart}from'../store/actions/cart';import{connect}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartScrean=function CartScrean(_ref){var match=_ref.match,history=_ref.history,location=_ref.location,it=_ref.it;var productId=match.params.id;var qty=location.search?Number(location.search.split('=')[1]):1;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;console.log(cartItems);useEffect(function(){dispatch(addToCart(productId,qty));},[productId,qty]);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){history.push('/login?redirect=shipping');};console.log(it);return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{children:[\"Your cart is empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"}),\" \"]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){var _jsx2;return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,(_jsx2={src:item.image,alt:item.name},_defineProperty(_jsx2,\"alt\",true),_defineProperty(_jsx2,\"rounded\",true),_jsx2))}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{tpye:\"button\",variant:\"light\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal ( \",cartItems.reduce(function(acc,cur){return acc+cur.qty;},0),\" ) item \"]}),\"$\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed to Checkout\"})})]})})})]});};var mapStateToProps=function mapStateToProps(state){return{it:state};};export default connect(mapStateToProps)(CartScrean);// if(productId) {\n//     dispatch(addToCart(productId))\n//     localStorage.setItem(\"cartItems\", JSON.stringify(it.cart.cartItems))\n//     console.log(it.cart.cartItems)\n// }","map":{"version":3,"sources":["/home/metro/Desktop/projects/ecom-mern/frontend/src/screens/cartScrean.js"],"names":["React","useEffect","useDispatch","useSelector","Message","Link","Row","Col","ListGroup","Image","Form","Button","Card","addToCart","removeFromCart","connect","CartScrean","match","history","location","it","productId","params","id","qty","search","Number","split","dispatch","cart","state","cartItems","console","log","removeFromCartHandler","checkoutHandler","push","length","map","item","image","name","product","price","e","target","value","Array","countInStock","keys","x","reduce","acc","cur","toFixed","mapStateToProps"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react'\nimport {useDispatch, useSelector} from 'react-redux'\nimport Message from '../components/Message'\nimport {Link} from 'react-router-dom'\nimport {Row, Col, ListGroup, Image, Form, Button, Card} from 'react-bootstrap'\nimport {addToCart, removeFromCart} from '../store/actions/cart'\nimport {connect} from 'react-redux'\n\n\nconst CartScrean = ({match, history, location, it}) => {\n    \n\n    const productId = match.params.id\n\n    const qty = location.search ? Number(location.search.split('=')[1]) : 1\n    \n    const dispatch = useDispatch()\n    const cart = useSelector(state => state.cart)\n    const {cartItems} =   cart\n    console.log(cartItems)\n\n    useEffect( () => {\n        dispatch(addToCart(productId, qty ))\n        \n    }, [productId, qty ] )\n\n    const removeFromCartHandler = (id) => {\n        dispatch(removeFromCart(id))\n    }\n\n\n    const checkoutHandler = () => {\n        history.push('/login?redirect=shipping')\n    }\n\n    console.log(it)\n\n   return (\n       <Row>\n           <Col md={8}>\n            <h1>Shopping Cart</h1>\n            {cartItems.length === 0 ? <Message>Your cart is empty <Link to=\"/\">Go Back</Link> </Message>: (\n                <ListGroup variant=\"flush\">\n                    {cartItems.map(item => (\n                        <ListGroup.Item key={item.product}>\n                            <Row>\n                                <Col md={2}>\n                                    <Image src={item.image} alt={item.name} alt rounded />\n                                </Col>\n                                <Col md={3}>\n                                    <Link to={`/product/${item.product}`}>{item.name}</Link>\n                                </Col>\n                                <Col md={2}>${item.price}</Col>\n                                <Col md={2}>\n                                <Form.Control as=\"select\" value={item.qty} onChange={(e) => dispatch(addToCart(item.product, Number(e.target.value))) }>\n\n                                {\n                                    [...Array(item.countInStock).keys()].map((x) => (\n                                        <option key={x+1} value={x+1} >\n                                            {x+1}\n                                        </option>\n                                    ))\n                                }\n                                    \n                                </Form.Control>\n                                </Col>\n\n                                <Col md={2}>\n                                <Button tpye=\"button\" variant=\"light\" onClick={() => removeFromCartHandler(item.product)}>\n                                <i className=\"fas fa-trash\"></i>\n                                </Button>\n                                </Col>\n\n\n                            </Row>\n                        </ListGroup.Item>\n                    ))}\n                </ListGroup>\n            )}\n           </Col>\n                \n         <Col md={4}>\n            \n            <Card>\n                <ListGroup variant=\"flush\">\n                    <ListGroup.Item>\n                        <h2>Subtotal ( {cartItems.reduce( (acc, cur) => acc+cur.qty, 0 )} ) item </h2>\n                        \n                        ${cartItems.reduce((acc, item) => acc + item.qty * item.price, 0).toFixed(2) }\n\n                    </ListGroup.Item>\n\n                    <ListGroup.Item>\n                        <Button type=\"button\" className=\"btn-block\" disabled={cartItems.length === 0} \n                        onClick={checkoutHandler}>Proceed to Checkout</Button>\n                    </ListGroup.Item>\n\n\n                </ListGroup>\n            </Card>\n\n            </Col>\n\n            \n\n       </Row>\n   ) \n}\n\nconst mapStateToProps = (state) => {\n    return {\n        it: state\n    }\n}\n\nexport default connect(mapStateToProps)(CartScrean)\n\n\n// if(productId) {\n//     dispatch(addToCart(productId))\n//     localStorage.setItem(\"cartItems\", JSON.stringify(it.cart.cartItems))\n\n//     console.log(it.cart.cartItems)\n\n// }"]},"metadata":{},"sourceType":"module"}