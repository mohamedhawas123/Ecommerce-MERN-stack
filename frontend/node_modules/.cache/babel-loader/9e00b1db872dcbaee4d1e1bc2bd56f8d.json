{"ast":null,"code":"import _slicedToArray from\"/home/metro/Desktop/projects/ecom-mern/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{Form,Button,Row,Col,Table}from'react-bootstrap';import{LinkContainer}from'react-router-bootstrap';import{useDispatch,useSelector}from'react-redux';import Loader from'../components/Loader';import Message from'../components/Message';import{UserDetail,updateUserProfile}from'../store/actions/user';import{listMyOrders}from'../store/actions/ordercreate';import FormContainer from'../components/formcontainer';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfileScrean=function ProfileScrean(_ref){var location=_ref.location,history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),namee=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),emaill=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var dispatch=useDispatch();var userDetails=useSelector(function(state){return state;});console.log(userDetails.user.userLogin);// const userDetaill = userDetails.user.userLogin\nvar _ref2=userDetails.user.userInfo?userDetails.user.userInfo:userDetails.user.userLogin.userInfo,name=_ref2.name,email=_ref2.email;var userLogin=useSelector(function(state){return state.user;});// const token = userLogin.userInfo.token \nvar userInfo=userLogin.userInfo,loading=userLogin.loading,error=userLogin.error;var Sucess=useSelector(function(state){return state.user.success;});var orderMylist=useSelector(function(state){return state.ordercreate;});var orders=orderMylist.orders,loadingOrers=orderMylist.loading,errorOrders=orderMylist.error;useEffect(function(){dispatch(UserDetail('profile'));dispatch(listMyOrders());setName(name);setEmail(email);},[dispatch,history,userInfo,name,email]);var submitHandlerr=function submitHandlerr(e){e.preventDefault();dispatch(updateUserProfile(namee,emaill,userLogin.userInfo.token));console.log(\"works\");};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"User Profile Detail\"}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),Sucess&&/*#__PURE__*/_jsx(Message,{variant:\"success\",children:\"Profile Updated\"}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandlerr,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"name\",placeholder:\"Enter name\",value:namee,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter email\",value:emaill,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Update\"})]})]}),/*#__PURE__*/_jsxs(Col,{md:9,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Orders\"}),loadingOrers?/*#__PURE__*/_jsx(Loader,{}):errorOrders?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorOrders}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DATA\"}),/*#__PURE__*/_jsx(\"th\",{children:\"TOTAL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PAID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DELIVERED\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(function(order){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:order._id}),/*#__PURE__*/_jsx(\"td\",{children:order.createdAt}),/*#__PURE__*/_jsx(\"td\",{children:order.totalPrice}),/*#__PURE__*/_jsx(\"td\",{children:order.isPaid?order.paidAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",stlye:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:order.isDelivered?order.deliveredAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",stlye:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(LinkContainer,{to:\"/order/\".concat(order._id),children:/*#__PURE__*/_jsx(Button,{className:\"btn-sm\",variant:\"light\",children:\"Details\"})})})]},order._id);})})]})]})]});};export default ProfileScrean;","map":{"version":3,"sources":["/home/metro/Desktop/projects/ecom-mern/frontend/src/screens/profilescreen.js"],"names":["React","useState","useEffect","Link","Form","Button","Row","Col","Table","LinkContainer","useDispatch","useSelector","Loader","Message","UserDetail","updateUserProfile","listMyOrders","FormContainer","axios","ProfileScrean","location","history","namee","setName","emaill","setEmail","password","setPassword","message","setMessage","dispatch","userDetails","state","console","log","user","userLogin","userInfo","name","email","loading","error","Sucess","success","orderMylist","ordercreate","orders","loadingOrers","errorOrders","submitHandlerr","e","preventDefault","token","target","value","map","order","_id","createdAt","totalPrice","isPaid","paidAt","substring","color","isDelivered","deliveredAt"],"mappings":"kIAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,OAAQC,IAAR,CAAcC,MAAd,CAAsBC,GAAtB,CAA2BC,GAA3B,CAAgCC,KAAhC,KAA4C,iBAA5C,CACA,OAAQC,aAAR,KAA4B,wBAA5B,CACA,OAAQC,WAAR,CAAqBC,WAArB,KAAuC,aAAvC,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,OAAQC,UAAR,CAAoBC,iBAApB,KAA4C,uBAA5C,CACA,OAAQC,YAAR,KAA2B,8BAA3B,CACA,MAAOC,CAAAA,aAAP,KAA0B,6BAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAGA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAAyB,IAAvBC,CAAAA,QAAuB,MAAvBA,QAAuB,CAAbC,OAAa,MAAbA,OAAa,eAElBpB,QAAQ,CAAC,EAAD,CAFU,wCAEpCqB,KAFoC,eAE7BC,OAF6B,8BAGhBtB,QAAQ,CAAC,EAAD,CAHQ,yCAGpCuB,MAHoC,eAG5BC,QAH4B,8BAIXxB,QAAQ,CAAC,EAAD,CAJG,yCAIpCyB,QAJoC,eAI1BC,WAJ0B,8BAKb1B,QAAQ,CAAC,IAAD,CALK,yCAKpC2B,OALoC,eAK3BC,UAL2B,eAS3C,GAAMC,CAAAA,QAAQ,CAAGpB,WAAW,EAA5B,CAEA,GAAMqB,CAAAA,WAAW,CAAGpB,WAAW,CAAC,SAAAqB,KAAK,QAAIA,CAAAA,KAAJ,EAAN,CAA/B,CACAC,OAAO,CAACC,GAAR,CAAYH,WAAW,CAACI,IAAZ,CAAiBC,SAA7B,EACD;AAb4C,UAetBL,WAAW,CAACI,IAAZ,CAAiBE,QAAjB,CAA4BN,WAAW,CAACI,IAAZ,CAAiBE,QAA7C,CAAuDN,WAAW,CAACI,IAAZ,CAAiBC,SAAjB,CAA2BC,QAf5D,CAerCC,IAfqC,OAerCA,IAfqC,CAe/BC,KAf+B,OAe/BA,KAf+B,CAmB3C,GAAMH,CAAAA,SAAS,CAAGzB,WAAW,CAAC,SAAAqB,KAAK,QAAIA,CAAAA,KAAK,CAACG,IAAV,EAAN,CAA7B,CAEA;AArB2C,GAsBpCE,CAAAA,QAtBoC,CAsBLD,SAtBK,CAsBpCC,QAtBoC,CAsB1BG,OAtB0B,CAsBLJ,SAtBK,CAsB1BI,OAtB0B,CAsBjBC,KAtBiB,CAsBLL,SAtBK,CAsBjBK,KAtBiB,CAyB3C,GAAMC,CAAAA,MAAM,CAAG/B,WAAW,CAAC,SAAAqB,KAAK,QAAIA,CAAAA,KAAK,CAACG,IAAN,CAAWQ,OAAf,EAAN,CAA1B,CAEA,GAAMC,CAAAA,WAAW,CAAGjC,WAAW,CAAC,SAAAqB,KAAK,QAAIA,CAAAA,KAAK,CAACa,WAAV,EAAN,CAA/B,CA3B2C,GA4BpCC,CAAAA,MA5BoC,CA4BiBF,WA5BjB,CA4BpCE,MA5BoC,CA4BnBC,YA5BmB,CA4BiBH,WA5BjB,CA4B5BJ,OA5B4B,CA4BEQ,WA5BF,CA4BiBJ,WA5BjB,CA4BLH,KA5BK,CA8B3CvC,SAAS,CAAC,UAAM,CACZ4B,QAAQ,CAAChB,UAAU,CAAC,SAAD,CAAX,CAAR,CACAgB,QAAQ,CAACd,YAAY,EAAb,CAAR,CACAO,OAAO,CAACe,IAAD,CAAP,CACAb,QAAQ,CAACc,KAAD,CAAR,CACH,CALQ,CAKN,CAACT,QAAD,CAAWT,OAAX,CAAoBgB,QAApB,CAA8BC,IAA9B,CAAoCC,KAApC,CALM,CAAT,CAOA,GAAMU,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,CAAD,CAAO,CAC1BA,CAAC,CAACC,cAAF,GACArB,QAAQ,CAACf,iBAAiB,CAACO,KAAD,CAAQE,MAAR,CAAgBY,SAAS,CAACC,QAAV,CAAmBe,KAAnC,CAAlB,CAAR,CACAnB,OAAO,CAACC,GAAR,CAAY,OAAZ,EAGH,CAND,CASA,mBAGI,MAAC,GAAD,yBACI,MAAC,GAAD,EAAK,EAAE,CAAE,CAAT,wBAEA,2CAFA,CAGHO,KAAK,eAAI,KAAC,OAAD,EAAS,OAAO,CAAC,QAAjB,UAA2BA,KAA3B,EAHN,CAIHC,MAAM,eAAI,KAAC,OAAD,EAAS,OAAO,CAAC,SAAjB,6BAJP,CAKHF,OAAO,eAAI,KAAC,MAAD,IALR,cAMJ,MAAC,IAAD,EAAM,QAAQ,CAAES,cAAhB,wBAEA,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,wBACQ,KAAC,IAAD,CAAM,KAAN,mBADR,cAEQ,KAAC,IAAD,CAAM,OAAN,EACC,IAAI,CAAC,MADN,CAEE,WAAW,CAAC,YAFd,CAGE,KAAK,CAAE3B,KAHT,CAIA,QAAQ,CAAE,kBAAC4B,CAAD,QAAM3B,CAAAA,OAAO,CAAC2B,CAAC,CAACG,MAAF,CAASC,KAAV,CAAb,EAJV,EAFR,GAFA,cAcI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,OAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,4BADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACC,IAAI,CAAC,OADN,CAEE,WAAW,CAAC,aAFd,CAGE,KAAK,CAAE9B,MAHT,CAIA,QAAQ,CAAE,kBAAC0B,CAAD,QAAMzB,CAAAA,QAAQ,CAACyB,CAAC,CAACG,MAAF,CAASC,KAAV,CAAd,EAJV,EAFJ,GAdJ,cAyBI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,UAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,uBADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACC,IAAI,CAAC,UADN,CAEE,WAAW,CAAC,gBAFd,CAGE,KAAK,CAAE5B,QAHT,CAIA,QAAQ,CAAE,kBAACwB,CAAD,QAAMvB,CAAAA,WAAW,CAACuB,CAAC,CAACG,MAAF,CAASC,KAAV,CAAjB,EAJV,EAFJ,GAzBJ,cAoCI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAuB,OAAO,CAAC,SAA/B,oBApCJ,GANI,GADJ,cAsDA,MAAC,GAAD,EAAK,EAAE,CAAE,CAAT,wBACI,iCADJ,CAEKP,YAAY,cAAG,KAAC,MAAD,IAAH,CAAgBC,WAAW,cAAG,KAAC,OAAD,EAAS,OAAO,CAAC,QAAjB,UACtCA,WADsC,EAAH,cAEhC,MAAC,KAAD,EAAO,OAAO,KAAd,CAAe,QAAQ,KAAvB,CAAwB,KAAK,KAA7B,CAA8B,UAAU,KAAxC,CAAyC,SAAS,CAAC,UAAnD,wBACI,oCACI,mCACI,0BADJ,cAEI,4BAFJ,cAGI,6BAHJ,cAII,4BAJJ,cAKI,iCALJ,cAMI,aANJ,GADJ,EADJ,cAYI,uBACKF,MAAM,CAACS,GAAP,CAAW,SAAAC,KAAK,qBACb,mCACI,oBAAKA,KAAK,CAACC,GAAX,EADJ,cAEI,oBAAKD,KAAK,CAACE,SAAX,EAFJ,cAGI,oBAAKF,KAAK,CAACG,UAAX,EAHJ,cAII,oBACKH,KAAK,CAACI,MAAN,CACGJ,KAAK,CAACK,MAAN,CAAaC,SAAb,CAAuB,CAAvB,CAAyB,EAAzB,CADH,cAEO,UAAG,SAAS,CAAC,cAAb,CAA4B,KAAK,CAAE,CAACC,KAAK,CAAC,KAAP,CAAnC,EAHZ,EAJJ,cAYI,oBACKP,KAAK,CAACQ,WAAN,CACGR,KAAK,CAACS,WAAN,CAAkBH,SAAlB,CAA4B,CAA5B,CAA8B,EAA9B,CADH,cAEO,UAAG,SAAS,CAAC,cAAb,CAA4B,KAAK,CAAE,CAACC,KAAK,CAAC,KAAP,CAAnC,EAHZ,EAZJ,cAqBI,iCACI,KAAC,aAAD,EAAe,EAAE,kBAAYP,KAAK,CAACC,GAAlB,CAAjB,uBACI,KAAC,MAAD,EAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,CAAC,OAAnC,qBADJ,EADJ,EArBJ,GAASD,KAAK,CAACC,GAAf,CADa,EAAhB,CADL,EAZJ,GAJZ,GAtDA,GAHJ,CAiHH,CA/JD,CAiKA,cAAetC,CAAAA,aAAf","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport {Link} from 'react-router-dom'\nimport {Form, Button, Row, Col, Table} from 'react-bootstrap'\nimport {LinkContainer} from 'react-router-bootstrap'\nimport {useDispatch, useSelector} from 'react-redux'\nimport Loader from '../components/Loader'\nimport Message from '../components/Message'\nimport {UserDetail, updateUserProfile} from '../store/actions/user'\nimport {listMyOrders} from '../store/actions/ordercreate'\nimport FormContainer from '../components/formcontainer'\nimport axios from 'axios'\n\n\nconst ProfileScrean = ({location, history}) => {\n\n    const [namee, setName] = useState('')\n    const [emaill, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const [message, setMessage] = useState(null)\n\n\n\n    const dispatch = useDispatch()\n\n    const userDetails = useSelector(state => state)\n    console.log(userDetails.user.userLogin)\n   // const userDetaill = userDetails.user.userLogin\n    \n   const {name, email} = userDetails.user.userInfo ? userDetails.user.userInfo: userDetails.user.userLogin.userInfo\n   \n   \n    \n    const userLogin = useSelector(state => state.user)\n   \n    // const token = userLogin.userInfo.token \n    const {userInfo, loading, error,  } = userLogin\n\n    \n    const Sucess = useSelector(state => state.user.success)\n\n    const orderMylist = useSelector(state => state.ordercreate) \n    const {orders, loading: loadingOrers, error: errorOrders} = orderMylist\n\n    useEffect(() => {\n        dispatch(UserDetail('profile'))\n        dispatch(listMyOrders())\n        setName(name)\n        setEmail(email)\n    }, [dispatch, history, userInfo, name, email])\n\n    const submitHandlerr = (e) => {\n        e.preventDefault()\n        dispatch(updateUserProfile(namee, emaill, userLogin.userInfo.token ))\n        console.log(\"works\")\n        \n       \n    }\n\n\n    return (\n      \n\n        <Row>\n            <Col md={3}>\n\n            <h1>User Profile Detail</h1>\n        {error && <Message variant=\"danger\">{error}</Message>}\n        {Sucess && <Message variant=\"success\">Profile Updated</Message>}\n        {loading && <Loader />}\n        <Form onSubmit={submitHandlerr}  >\n\n        <Form.Group controlId=\"name\">\n                <Form.Label>Name</Form.Label>\n                <Form.Control\n                 type=\"name\"\n                  placeholder=\"Enter name\"\n                  value={namee}\n                onChange={(e)=> setName(e.target.value) }>\n\n                </Form.Control>\n            </Form.Group>\n\n\n            <Form.Group controlId=\"email\">\n                <Form.Label>Email Address</Form.Label>\n                <Form.Control\n                 type=\"email\"\n                  placeholder=\"Enter email\"\n                  value={emaill}\n                onChange={(e)=> setEmail(e.target.value) }>\n\n                </Form.Control>\n            </Form.Group>\n\n            <Form.Group controlId=\"password\">\n                <Form.Label>password</Form.Label>\n                <Form.Control\n                 type=\"password\"\n                  placeholder=\"Enter password\"\n                  value={password}\n                onChange={(e)=> setPassword(e.target.value) }>\n\n                </Form.Control>\n            </Form.Group>\n\n            <Button type=\"submit\"  variant=\"primary\">\n                Update\n            </Button>\n            \n\n\n        </Form>\n\n\n            </Col>\n\n        <Col md={9}>\n            <h2>My Orders</h2>\n            {loadingOrers ? <Loader /> : errorOrders ? <Message variant=\"danger\">\n                {errorOrders}</Message>: (\n                    <Table striped bordered hover responsive className=\"table-sm\">\n                        <thead>\n                            <tr>\n                                <th>ID</th>\n                                <th>DATA</th>\n                                <th>TOTAL</th>\n                                <th>PAID</th>\n                                <th>DELIVERED</th>\n                                <th></th>\n                            </tr>\n                        </thead>\n\n                        <tbody>\n                            {orders.map(order => (\n                                <tr key={order._id}>\n                                    <td>{order._id}</td>\n                                    <td>{order.createdAt}</td>\n                                    <td>{order.totalPrice}</td>\n                                    <td>\n                                        {order.isPaid ? (\n                                            order.paidAt.substring(0,10)):(\n                                                <i className=\"fas fa-times\" stlye={{color:'red'}}></i>\n                                            \n                                        )}\n                                    </td>\n\n                                    <td>\n                                        {order.isDelivered ? (\n                                            order.deliveredAt.substring(0,10)):(\n                                                <i className=\"fas fa-times\" stlye={{color:'red'}}></i>\n                                            \n                                        )}\n                                    </td>\n\n\n                                    <td>\n                                        <LinkContainer to={`/order/${order._id}`}>\n                                            <Button className=\"btn-sm\" variant=\"light\">Details</Button>\n                                        </LinkContainer>\n                                    </td>\n                                    \n                                </tr>\n                            ))}\n                        </tbody>\n\n                    </Table>\n                ) }\n        </Col>\n\n        </Row>\n\n    )\n}\n\nexport default ProfileScrean"]},"metadata":{},"sourceType":"module"}