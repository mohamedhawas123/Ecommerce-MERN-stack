{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Form,Button,Table,Row,Col}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import{Link}from'react-router-dom';import Loader from'../components/Loader';import{productList}from'../store/actions/productlist';import{LinkContainer}from'react-router-bootstrap';import{deleteProduct,createProduct}from'../store/actions/productlist';import{PRODUCT_CREATE_REST}from'../store/actions/actionTypes';import Paginate from'../components/pageinate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductListScrean=function ProductListScrean(_ref){var history=_ref.history,match=_ref.match;var dispatch=useDispatch();var pageNumber=match.params.pageNumber||1;var productListt=useSelector(function(state){return state.Product;});var loading=productListt.loading,error=productListt.error,products=productListt.products,page=productListt.page,pages=productListt.pages;var userLogin=useSelector(function(state){return state.user;});var userInfo=userLogin.userInfo;var getSucess=useSelector(function(state){return state.Product;});var success=getSucess.success,loadingDelete=getSucess.loading,errorDelete=getSucess.error;var creatProduct=useSelector(function(state){return state.Product;});var loadingCreate=creatProduct.loading,errorLoading=creatProduct.error,successCreate=creatProduct.success,createdProduct=creatProduct.product;useEffect(function(){// dispatch({type:PRODUCT_CREATE_REST})\nif(!userInfo.isAdmin){history.push('/');}if(successCreate){history.push(\"product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(productList('',pageNumber));}},[dispatch,history,userInfo,success,successCreate,createdProduct,pageNumber]);var deleteHandlee=function deleteHandlee(id){if(window.confirm(\"Are you sure\")){dispatch(deleteProduct(id));history.push('/admin/productlist');}};var createProducthandle=function createProducthandle(){dispatch(createProduct());};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Products\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsxs(Button,{className:\"my-3\",onClick:createProducthandle,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\" Create Product\"]})})]}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),errorLoading&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorLoading}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"BRAND\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products&&products.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$ \",product.price]}),/*#__PURE__*/_jsx(\"td\",{children:product.category}),/*#__PURE__*/_jsx(\"td\",{children:product.brand}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"product/\".concat(product._id,\"/edit/\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandlee(product._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},product._id);})})]}),/*#__PURE__*/_jsx(Paginate,{pages:pages,page:page,isAdmin:true})]})]});};export default ProductListScrean;","map":{"version":3,"sources":["/home/metro/Desktop/projects/ecom-mern/frontend/src/screens/productlistscreen.js"],"names":["React","useEffect","useState","Form","Button","Table","Row","Col","useDispatch","useSelector","Message","Link","Loader","productList","LinkContainer","deleteProduct","createProduct","PRODUCT_CREATE_REST","Paginate","ProductListScrean","history","match","dispatch","pageNumber","params","productListt","state","Product","loading","error","products","page","pages","userLogin","user","userInfo","getSucess","success","loadingDelete","errorDelete","creatProduct","loadingCreate","errorLoading","successCreate","createdProduct","product","isAdmin","push","_id","deleteHandlee","id","window","confirm","createProducthandle","map","name","price","category","brand"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport {Form, Button, Table, Row, Col} from 'react-bootstrap'\nimport {useDispatch, useSelector} from 'react-redux'\nimport Message from '../components/Message'\nimport {Link} from 'react-router-dom'\nimport Loader  from '../components/Loader'\nimport {productList} from '../store/actions/productlist'\nimport {LinkContainer} from 'react-router-bootstrap'\nimport {deleteProduct, createProduct} from '../store/actions/productlist'\nimport {PRODUCT_CREATE_REST} from '../store/actions/actionTypes'\nimport Paginate from '../components/pageinate'\n\nconst ProductListScrean = ({history, match}) => {\n\n    const dispatch = useDispatch()\n\n    const pageNumber = match.params.pageNumber || 1\n\n    const productListt = useSelector(state => state.Product)\n    const {loading, error, products, page, pages} = productListt\n\n    const userLogin = useSelector( (state) => state.user )\n    const {userInfo} = userLogin\n\n\n    const getSucess= useSelector((state) => state.Product)\n    const {success, loading: loadingDelete, error: errorDelete} = getSucess\n\n\n    const creatProduct = useSelector(state => state.Product)\n    const {loading: loadingCreate, error: errorLoading, success:successCreate, product: createdProduct } = creatProduct \n\n    useEffect( () => {\n        // dispatch({type:PRODUCT_CREATE_REST})\n\n\n        if(!userInfo.isAdmin) {\n            history.push('/')\n        }\n\n        if (successCreate) {\n            history.push(`product/${createdProduct._id}/edit`)\n        }else {\n            dispatch(productList('', pageNumber))\n        }\n        \n    }, [dispatch, history,userInfo, success, successCreate, createdProduct, pageNumber ])\n\n\n    const deleteHandlee = (id) => {\n        if(window.confirm(\"Are you sure\")) {\n            dispatch(deleteProduct(id))\n            history.push('/admin/productlist')\n            \n        }\n        \n    }\n\n    const createProducthandle = () => {\n        \n        dispatch(createProduct())\n    }\n\n    return (\n        <div>\n\n            <Row className=\"align-items-center\">\n                <Col>\n                <h1>Products</h1>\n                </Col>\n\n                <Col className=\"text-right\">\n                    <Button className=\"my-3\" onClick={createProducthandle}>\n                       <i className=\"fas fa-plus\"></i> Create Product\n                    </Button>\n                </Col>\n            </Row>\n\n            {loadingDelete && <Loader />}\n            {errorDelete && <Message variant=\"danger\">{errorDelete}</Message>}\n\n            {loadingCreate && <Loader />}\n            {errorLoading && <Message variant=\"danger\">{errorLoading}</Message>}\n\n\n            {loading ? <Loader />: error ? <Message variant=\"danger\">{error}</Message>: (\n                <React.Fragment>\n                    <Table striped bordered hover responsive className=\"table-sm\">\n                    <thead>\n                        <tr>\n                            <th>ID</th>\n                            <th>NAME</th>\n                            <th>PRICE</th>\n                            <th>CATEGORY</th>\n                            <th>BRAND</th>\n                        </tr>\n                    </thead>\n\n                    <tbody>\n                        \n                        {products && products.map(product => (\n                            <tr key={product._id}>\n                                <td>{product.name}</td>\n                                <td>\n                                    $ {product.price}\n                                </td>\n                                \n                                <td>\n                                    {product.category}\n                                </td>\n\n                                <td>{product.brand}</td>\n\n                                <td>\n                                    <LinkContainer to={`product/${product._id}/edit/`}>\n                                        <Button variant=\"light\" className=\"btn-sm\">\n                                            <i className=\"fas fa-edit\"></i>\n                                        </Button>\n                                    </LinkContainer>\n\n                                    \n\n                                        <Button variant=\"danger\" className=\"btn-sm\"\n                                        onClick={() => deleteHandlee(product._id)}>\n                                            <i className=\"fas fa-trash\"></i>\n                                            </Button>\n\n                                </td>\n\n                            </tr>\n                        ))}\n                    </tbody>\n\n                </Table>\n\n                <Paginate pages={pages} page={page} isAdmin={true} />\n\n                </React.Fragment>\n                \n            )}\n        </div>\n    )\n}\n\nexport default ProductListScrean"]},"metadata":{},"sourceType":"module"}