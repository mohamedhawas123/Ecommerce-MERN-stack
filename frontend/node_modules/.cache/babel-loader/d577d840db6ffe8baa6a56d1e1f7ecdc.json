{"ast":null,"code":"import _regeneratorRuntime from\"/home/metro/Desktop/projects/ecom-mern/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/metro/Desktop/projects/ecom-mern/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from'react';import*as actionTypes from'./actionTypes';import axios from'axios';var fetchStart=function fetchStart(){return{type:actionTypes.FETCH_START};};var fetchSucess=function fetchSucess(products){return{type:actionTypes.FETCH_SUCCESS,products:products};};var fetchFail=function fetchFail(err){return{type:actionTypes.FETCH_FAIL,err:err};};export var productList=function productList(){var keyword=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var pageNumber=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';return function(dispatch){dispatch(fetchStart());axios.get(\"/api/products?keyword=\".concat(keyword,\"&pageNumber=\").concat(pageNumber)).then(function(res){console.log(res.data);dispatch(fetchSucess(res.data));}).catch(function(err){dispatch(fetchFail(err));});};};var fetchDetailStart=function fetchDetailStart(){return{type:actionTypes.FETCH_DETAIL_START};};var fetchDetailSucess=function fetchDetailSucess(product){return{type:actionTypes.FETCH_DETAIL_SUCCESS,product:product};};var fetchDetailFail=function fetchDetailFail(error){return{type:actionTypes.FETCH_DETAIL_FAIL,error:error};};export var productDetail=function productDetail(id){return function(dispatch){dispatch(fetchDetailStart());axios.get(\"/api/products/\".concat(id)).then(function(res){dispatch(fetchDetailSucess(res.data));}).catch(function(err){dispatch(fetchDetailFail(err));});};};export var deleteProduct=function deleteProduct(id){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var config;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:actionTypes.PRODUCT_DELETE_REQUEST});config={headers:{Authorization:\"Bearer \".concat(getState().user.userInfo.token)}};_context.next=5;return axios.delete(\"/api/products/\".concat(id),config);case 5:dispatch({type:actionTypes.PRODUCT_DELETE_SUCCESS});_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);dispatch({type:actionTypes.PRODUCT_DELETE_FAIL,payload:_context.t0});console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var createProduct=function createProduct(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch({type:actionTypes.PRODUCT_CREATE_REQUEST});config={headers:{Authorization:\"Bearer \".concat(getState().user.userInfo.token)}};_context2.next=5;return axios.post(\"/api/products\",{},config);case 5:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;dispatch({type:actionTypes.PRODUCT_CREATE_SUCCESS,payload:data});_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);dispatch({type:actionTypes.PRODUCT_CREATE_FAIL,payload:_context2.t0});console.log(_context2.t0);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();};export var updateProduct=function updateProduct(product){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var config,_yield$axios$put,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch({type:actionTypes.PRODUCT_UPDATE_REQUEST});config={headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(getState().user.userInfo.token)}};_context3.next=5;return axios.put(\"/api/products/\".concat(product._id),product,config);case 5:_yield$axios$put=_context3.sent;data=_yield$axios$put.data;dispatch({type:actionTypes.PRODUCT_UPDATE_SUCCESS,payload:data});_context3.next=14;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);dispatch({type:actionTypes.PRODUCT_UPDATE_FAIL,payload:_context3.t0});console.log(_context3.t0);case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}();};export var createproductReview=function createproductReview(productId,review){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var config;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;dispatch({type:actionTypes.PRODUCT_UPDATE_REVIEW_REQUEST});config={headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(getState().user.userInfo.token)}};_context4.next=5;return axios.post(\"/api/products/\".concat(productId,\"/reviews\"),review,config);case 5:dispatch({type:actionTypes.PRODUCT_UPDATE_REVIEW_SUCCESS});_context4.next=12;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);dispatch({type:actionTypes.PRODUCT_UPDATE_REVIEW_FAIL,payload:_context4.t0});console.log(_context4.t0);case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}();};export var listtopProduct=function listtopProduct(){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;dispatch({type:actionTypes.PRODUCT_TOP_REQUEST});_context5.next=4;return axios.get(\"/api/products/top\");case 4:_yield$axios$get=_context5.sent;data=_yield$axios$get.data;dispatch({type:actionTypes.PRODUCT_TOP_SUCCESS,payload:data});_context5.next=12;break;case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](0);dispatch({type:actionTypes.PRODUCT_TOP_FAIL,payload:_context5.t0});case 12:case\"end\":return _context5.stop();}}},_callee5,null,[[0,9]]);}));return function(_x9){return _ref5.apply(this,arguments);};}();};","map":{"version":3,"sources":["/home/metro/Desktop/projects/ecom-mern/frontend/src/store/actions/productlist.js"],"names":["React","actionTypes","axios","fetchStart","type","FETCH_START","fetchSucess","products","FETCH_SUCCESS","fetchFail","err","FETCH_FAIL","productList","keyword","pageNumber","dispatch","get","then","res","console","log","data","catch","fetchDetailStart","FETCH_DETAIL_START","fetchDetailSucess","product","FETCH_DETAIL_SUCCESS","fetchDetailFail","error","FETCH_DETAIL_FAIL","productDetail","id","deleteProduct","getState","PRODUCT_DELETE_REQUEST","config","headers","Authorization","user","userInfo","token","delete","PRODUCT_DELETE_SUCCESS","PRODUCT_DELETE_FAIL","payload","createProduct","PRODUCT_CREATE_REQUEST","post","PRODUCT_CREATE_SUCCESS","PRODUCT_CREATE_FAIL","updateProduct","PRODUCT_UPDATE_REQUEST","put","_id","PRODUCT_UPDATE_SUCCESS","PRODUCT_UPDATE_FAIL","createproductReview","productId","review","PRODUCT_UPDATE_REVIEW_REQUEST","PRODUCT_UPDATE_REVIEW_SUCCESS","PRODUCT_UPDATE_REVIEW_FAIL","listtopProduct","PRODUCT_TOP_REQUEST","PRODUCT_TOP_SUCCESS","PRODUCT_TOP_FAIL"],"mappings":"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","sourcesContent":["import React from 'react'\nimport * as actionTypes from './actionTypes'\nimport axios from 'axios'\n\n\nconst fetchStart = () => {\n    return {\n        type: actionTypes.FETCH_START\n    }\n}\n\nconst fetchSucess = (products) => {\n    return {\n        type: actionTypes.FETCH_SUCCESS,\n        products: products\n    }\n}\n\n\n\n\nconst fetchFail = err => {\n    return {\n        type : actionTypes.FETCH_FAIL,\n        err: err\n    }\n}\n\nexport const productList = (keyword = '', pageNumber='') => {\n    return dispatch => {\n\n        dispatch(fetchStart())\n        axios.get(`/api/products?keyword=${keyword}&pageNumber=${pageNumber}`)\n        .then(res => {\n            console.log(res.data)\n        dispatch(fetchSucess(res.data))\n    })\n        .catch(err => {\n        dispatch(fetchFail(err))\n        \n    })\n    }\n    \n\n}\n\n\nconst fetchDetailStart = () => {\n    return {\n        type:actionTypes.FETCH_DETAIL_START\n    }\n}\n\n\nconst fetchDetailSucess = (product) => {\n    return {\n        type: actionTypes.FETCH_DETAIL_SUCCESS,\n        product: product\n    }\n}\n\n\nconst fetchDetailFail = (error) => {\n    return {\n        type:actionTypes.FETCH_DETAIL_FAIL,\n        error: error\n    }\n}\n\n\n\nexport const productDetail = (id) => {\n    return dispatch => {\n\n        dispatch(fetchDetailStart())\n        axios.get(`/api/products/${id}`)\n        .then(res => {\n        dispatch(fetchDetailSucess(res.data))\n    })\n        .catch(err => {\n        dispatch(fetchDetailFail(err))\n        \n    })\n    }\n    \n\n}\n\n\nexport const deleteProduct = (id) => async(dispatch, getState) => {\n    try {\n        dispatch({\n            type: actionTypes.PRODUCT_DELETE_REQUEST\n        })\n\n        const config = {\n            headers: {\n            \n                Authorization: `Bearer ${getState().user.userInfo.token}`\n            },\n        }\n\n        await axios.delete(`/api/products/${id}`, config)\n\n        dispatch({\n            type: actionTypes.PRODUCT_DELETE_SUCCESS\n            \n        })\n\n    }catch(error) {\n        dispatch({\n            type:actionTypes.PRODUCT_DELETE_FAIL,\n            payload:error\n        })\n        console.log(error)\n    }\n}\n\n\nexport const createProduct = () => async(dispatch, getState) => {\n    try {\n        dispatch({\n            type: actionTypes.PRODUCT_CREATE_REQUEST\n        })\n\n        const config = {\n            headers: {\n            \n                Authorization: `Bearer ${getState().user.userInfo.token}`\n            },\n        }\n\n        const {data} = await axios.post(`/api/products`, {} ,config)\n\n        dispatch({\n            type: actionTypes.PRODUCT_CREATE_SUCCESS,\n            payload: data\n            \n        })\n\n    }catch(error) {\n        dispatch({\n            type:actionTypes.PRODUCT_CREATE_FAIL,\n            payload:error\n        })\n        console.log(error)\n    }\n}\n\n\n\nexport const updateProduct = (product) => async(dispatch, getState) => {\n    try {\n        dispatch({\n            type: actionTypes.PRODUCT_UPDATE_REQUEST\n        })\n\n        const config = {\n            headers: {\n                'Content-Type': 'application/json',\n                Authorization: `Bearer ${getState().user.userInfo.token}`\n            },\n        }\n\n        const {data} = await axios.put(`/api/products/${product._id}`, product ,config)\n\n        dispatch({\n            type: actionTypes.PRODUCT_UPDATE_SUCCESS,\n            payload: data\n            \n        })\n\n    }catch(error) {\n        dispatch({\n            type:actionTypes.PRODUCT_UPDATE_FAIL,\n            payload:error\n        })\n        console.log(error)\n    }\n}\n\n\n\nexport const createproductReview = (productId, review) => async(dispatch, getState) => {\n    try {\n        dispatch({\n            type: actionTypes.PRODUCT_UPDATE_REVIEW_REQUEST\n        })\n\n        const config = {\n            headers: {\n                'Content-Type': 'application/json',\n                Authorization: `Bearer ${getState().user.userInfo.token}`\n            },\n        }\n\n        await axios.post(`/api/products/${productId}/reviews`, review ,config)\n\n        dispatch({\n            type: actionTypes.PRODUCT_UPDATE_REVIEW_SUCCESS,\n           \n            \n        })\n\n    }catch(error) {\n        dispatch({\n            type:actionTypes.PRODUCT_UPDATE_REVIEW_FAIL,\n            payload:error\n        })\n        console.log(error)\n    }\n}\n\n\nexport const listtopProduct = () => async ( dispatch ) => {\n\n    try {\n        dispatch({\n        type:actionTypes.PRODUCT_TOP_REQUEST\n    })\n\n    const {data} = await axios.get(`/api/products/top`)\n\n    dispatch({\n        type:actionTypes.PRODUCT_TOP_SUCCESS,\n\n        payload: data\n    })\n    } catch(err) {\n        dispatch({type:actionTypes.PRODUCT_TOP_FAIL, payload: err })\n    }\n    \n\n}"]},"metadata":{},"sourceType":"module"}