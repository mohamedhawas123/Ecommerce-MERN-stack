{"ast":null,"code":"import _toConsumableArray from\"/home/metro/Desktop/projects/ecom-mern/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/metro/Desktop/projects/ecom-mern/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{Row,Col,Image,ListGroup,Card,Button}from'react-bootstrap';import Rating from'../components/rating';import axios from'axios';import{productDetail,createproductReview}from'../store/actions/productlist';import{connect}from\"react-redux\";import Form from'react-bootstrap/Form';import{PRODUCT_UPDATE_REVIEW_REST}from'../store/actions/actionTypes';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductScreen=function ProductScreen(props){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),Comment=_useState6[0],setComment=_useState6[1];var productReviewCreate=useSelector(function(state){return state.Product;});var successReview=productReviewCreate.success,loadingReview=productReviewCreate.loading,errorReview=productReviewCreate.error;var userLogin=useSelector(function(state){return state.user;});var userInfo=userLogin.userInfo;var dispatch=useDispatch();var product=props.product;console.log(product);// const [product, setProduct] = useState([])\nuseEffect(function(){if(successReview){alert(\"Review Submitted !\");setRating(0);setComment('');dispatch({type:PRODUCT_UPDATE_REVIEW_REST});}// const fetchdata = async () => {\n//     const {data} = await axios.get(`/api/products/${match.params.id}`)\n//     setProduct(data)\n// }\n// fetchdata()\nprops.fetchData(props.match.params.id);},[dispatch,props.match,successReview]);var addToCartHandler=function addToCartHandler(){props.history.push(\"/cart/\".concat(props.match.params.id,\"?qty=\").concat(qty));};var submitHandler=function submitHandler(e){e.preventDefault();console.log();dispatch(createproductReview(props.match.params.id,{rating:rating,Comment:Comment}));};console.log(Comment);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-dark my-3\",to:\"/\",children:\"Go Back\"}),product?/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Image,{src:product.image,alt:product.name})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h3\",{children:product.name})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Rating,{value:product.rating,text:\"\".concat(product.numReviews,\" reviews \")})}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Price: $\",product.price]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Description: $\",product.description]})]})}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Price:\"}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"$\",product.price]})})]})})}),/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Status:\"}),/*#__PURE__*/_jsx(Col,{children:product.countInStock>0?'In Stock':'Out of Stock'})]})})}),product.countInStock>0&&/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Qty\"}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:qty,onChange:function onChange(e){setQty(e.target.value);},children:_toConsumableArray(Array(product.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{onClick:addToCartHandler,className:\"btn-block\",type:\"button\",disabled:product.countInStock===0,children:\"Add To Cart\"})})]})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reviews\"}),product.review&&product.review.length===0&&/*#__PURE__*/_jsx(Message,{children:\"No Reviews \"}),/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[product.review&&product.review.map(function(review){return/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"strong\",{children:review.name}),/*#__PURE__*/_jsx(Rating,{value:review.rating}),/*#__PURE__*/_jsx(\"p\",{children:review.createdAt.substring(0,10)}),/*#__PURE__*/_jsx(\"p\",{children:review.Comment})]},review._id);}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Write a Customer Review\"}),errorReview&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorReview}),userInfo?/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"rating\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Rating\"}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",value:rating,onChange:function onChange(e){return setRating(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select...\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1 - Poor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2 - Fair\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3 - Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4 - Very Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5 - Excellent\"})]})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"comment\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Comment\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",row:\"3\",value:Comment,onChange:function onChange(e){return setComment(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Submit\"})]}):/*#__PURE__*/_jsxs(\"h2\",{children:[\"please Sign it to review \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"here\"}),\" \"]})]})]})]})})]}):null]});};var mapStateToProps=function mapStateToProps(state){return{product:state.Product.product,error:state.Product.error,loading:state.Product.loading};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{fetchData:function fetchData(id){return dispatch(productDetail(id));}};};export default connect(mapStateToProps,mapDispatchToProps)(ProductScreen);","map":{"version":3,"sources":["/home/metro/Desktop/projects/ecom-mern/frontend/src/screens/productscreen.js"],"names":["React","useState","useEffect","Link","Row","Col","Image","ListGroup","Card","Button","Rating","axios","productDetail","createproductReview","connect","Form","PRODUCT_UPDATE_REVIEW_REST","useDispatch","useSelector","Message","ProductScreen","props","qty","setQty","rating","setRating","Comment","setComment","productReviewCreate","state","Product","successReview","success","loadingReview","loading","errorReview","error","userLogin","user","userInfo","dispatch","product","console","log","alert","type","fetchData","match","params","id","addToCartHandler","history","push","submitHandler","e","preventDefault","image","name","numReviews","price","description","countInStock","target","value","Array","keys","map","x","review","length","createdAt","substring","_id","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport {Link} from 'react-router-dom'\nimport {Row, Col, Image, ListGroup, Card, Button} from 'react-bootstrap'\nimport Rating from '../components/rating'\nimport axios from 'axios'\nimport {productDetail, createproductReview} from '../store/actions/productlist'\nimport { connect } from \"react-redux\";\nimport Form from 'react-bootstrap/Form'\nimport {PRODUCT_UPDATE_REVIEW_REST} from '../store/actions/actionTypes'\nimport {useDispatch, useSelector} from 'react-redux'\nimport Message from '../components/Message'\n\n\nconst ProductScreen = (props) => {\n    const [qty, setQty] = useState(1)\n    const [rating, setRating] = useState(0)\n    const [Comment, setComment] = useState('')\n\n    const productReviewCreate = useSelector(state => state.Product)\n    const{success: successReview, loading:loadingReview, error: errorReview} = productReviewCreate\n\n    const userLogin = useSelector( (state) => state.user )\n    const {userInfo} = userLogin\n    \n    const dispatch = useDispatch()\n\n    const {product} = props\n    console.log(product)\n    \n   // const [product, setProduct] = useState([])\n    \n    useEffect( () => {\n\n        if(successReview) {\n            alert(\"Review Submitted !\")\n            setRating(0)\n            setComment('')\n            dispatch({type: PRODUCT_UPDATE_REVIEW_REST})\n        }\n       \n        // const fetchdata = async () => {\n        //     const {data} = await axios.get(`/api/products/${match.params.id}`)\n        //     setProduct(data)\n        // }\n\n        // fetchdata()\n\n\n        props.fetchData(props.match.params.id)\n\n\n    }, [dispatch, props.match, successReview] )\n\n\n    const addToCartHandler = () => {\n        props.history.push(`/cart/${props.match.params.id}?qty=${qty}`)\n    }\n\n    \n\n    const submitHandler = (e) => {\n        e.preventDefault()\n        console.log()\n        dispatch(createproductReview(props.match.params.id, {\n            rating, \n            Comment\n        }))\n    }\n\n    console.log(Comment)\n\n    return (\n        <React.Fragment>\n            <Link className=\"btn btn-dark my-3\" to =\"/\">\n                Go Back\n            </Link>\n            {\n                product ? (\n                    <React.Fragment>\n                        \n                        <Row>\n                <Col md={6}>\n                <Image src={product.image} alt={product.name} />\n                </Col>\n\n                <Col md={3}>\n                <ListGroup variant=\"flush\">\n                    <ListGroup.Item>\n                        <h3>{product.name}</h3>\n                    </ListGroup.Item>\n                    <ListGroup.Item>\n                        <Rating value={product.rating} text={`${product.numReviews} reviews `} />\n                    </ListGroup.Item>\n                    <ListGroup.Item>\n                        Price: ${product.price}\n                    </ListGroup.Item>\n                    <ListGroup.Item>\n                    Description: ${product.description}\n                    </ListGroup.Item>\n\n                </ListGroup>\n                </Col>\n                <Col md={3}>\n                    <ListGroup variant=\"flush\">\n                        <ListGroup.Item>\n                            <Row>\n                                <Col>\n                                Price:\n                                </Col>\n                                \n                                <Col>\n                                <strong>${product.price}</strong>\n                                </Col>\n\n                            </Row>\n                        </ListGroup.Item>\n                    </ListGroup>\n                    <ListGroup variant=\"flush\">\n                        <ListGroup.Item>\n                            <Row>\n                                <Col>\n                                Status:\n                                </Col>\n                                \n                                <Col>\n                               {product.countInStock > 0 ? 'In Stock' : 'Out of Stock'}\n                                </Col>\n\n                            </Row>\n                        </ListGroup.Item>\n\n\n                    </ListGroup>\n\n                    {product.countInStock > 0 && (\n                        <ListGroup.Item>\n                            <Row>\n                                <Col>Qty</Col>\n                                <Col>\n                                <Form.Control as=\"select\" value={qty} onChange={(e) => {\n                                    setQty(e.target.value)\n                                }}>\n\n                                {\n                                    [...Array(product.countInStock).keys()].map((x) => (\n                                        <option key={x+1} value={x+1} >\n                                            {x+1}\n                                        </option>\n                                    ))\n                                }\n                                    \n                                </Form.Control>\n                                </Col>\n                            </Row>\n                        </ListGroup.Item>\n                    )}\n\n\n                    <ListGroup.Item>\n                            <Button onClick={addToCartHandler} className=\"btn-block\" type=\"button\" disabled={product.countInStock ===0 } >\n                                Add To Cart\n                            </Button>\n                        </ListGroup.Item>\n\n                </Col>\n\n            </Row>\n            \n            <Row>\n                <Col md={6}>\n                    <h2>Reviews</h2>\n                    {product.review && product.review.length === 0 && <Message>No Reviews </Message>}\n                    <ListGroup variant=\"flush\">\n                        {product.review && product.review.map(review => (\n                            <ListGroup.Item key={review._id}>\n                                <strong>{review.name}</strong>\n                            <Rating value={review.rating} />\n                            <p>{review.createdAt.substring(0, 10)}</p>\n                            <p>{review.Comment}</p>\n                            </ListGroup.Item>\n                            \n\n                        ))}\n                        <ListGroup.Item>\n                            <h2>Write a Customer Review</h2>\n                            {errorReview && <Message variant=\"danger\">{errorReview}</Message>}\n                            {\n                            userInfo ? \n                            (\n                                <Form onSubmit={submitHandler}>\n                                    <Form.Group controlId=\"rating\" >\n                                        <Form.Label>Rating</Form.Label>\n                                        <Form.Control as=\"select\" value={rating}\n                                        onChange={(e) => setRating(e.target.value)}>\n                                            <option value=\"\">Select...</option>\n                                            <option value=\"1\">1 - Poor</option>\n                                            <option value=\"2\">2 - Fair</option>\n                                            <option value=\"3\">3 - Good</option>\n                                            <option value=\"4\">4 - Very Good</option>\n                                            <option value=\"5\">5 - Excellent</option>\n                                        </Form.Control>\n                                        \n                                    </Form.Group>\n\n                                    <Form.Group controlId=\"comment\">\n                                            <Form.Label>Comment</Form.Label>\n                                            <Form.Control as=\"textarea\" row='3'\n                                            value={Comment}\n                                            onChange={(e) => setComment(e.target.value)}>\n                                                \n                                            </Form.Control>\n\n                                        </Form.Group> \n\n                                        <Button type=\"submit\" variant=\"primary\">\n                                            Submit\n                                        </Button>\n\n                                </Form>\n                            ):\n                             <h2>please Sign it to review <Link to=\"/login\">here</Link> </h2> }\n                        </ListGroup.Item>\n                    </ListGroup>\n                </Col>\n            </Row>\n\n                    </React.Fragment>\n                   \n\n                ): null\n            }\n            \n\n\n        </React.Fragment>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        product: state.Product.product,\n        error:state.Product.error,\n        loading: state.Product.loading\n    }\n    \n    \n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        fetchData: (id) => dispatch(productDetail(id))\n    }\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductScreen)"]},"metadata":{},"sourceType":"module"}